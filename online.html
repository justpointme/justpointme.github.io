<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>JustPoint</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	<meta name="viewport" content="width=device-width" />

	<link rel="apple-touch-icon" sizes="76x76" href="./assets/material-bootstrap/assets/img/apple-icon.png" />
	<link rel="icon" type="image/png" href="./logo/favicon.ico" />

	<!--     Fonts and icons     -->
	<link rel="stylesheet" type="text/css"
		href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

	<!-- CSS Files -->
	<link href="./assets/material-bootstrap/assets/css/bootstrap.min.css" rel="stylesheet" />
	<link href="./assets/material-bootstrap/assets/css/material-bootstrap-wizard.css" rel="stylesheet" />

	<style>
		.hiddenPics {
			max-width: 1px;
			max-height: 1px;
			visibility: hidden;
		}

		.resultImage {
			max-width: 80% !important;
			max-height: 50%;
			border-radius: 1em;
		}

		.spacer {
			height: 100px;
		}

		.text-link {
			color: #434fb8 !important;
			cursor: pointer;
			border: 0px;
			background-color: transparent;
		}

		.text-link:hover {
			color: #b0b1c0 !important;
			cursor: pointer;
		}

		input {
			width: 20%;
		}

		.wizard-card {
			height: 800px;
			margin-bottom: 50px;
		}

		.logo {
			max-width: 70px !important;
		}

		.form-control {
			max-width: 50% !important;
		}

		#bg-pic {
			background-image: url('./assets/bg/great-wall.png') !important;
		}

		@media only screen and (max-width: 500px) {
			.resultImage {
				/* Image modifications come here for Mobile */
				max-width: 80% !important;
				max-height: 40%;
				margin-top: -5%;
			}

			.main-text {
				margin-left: 5% !important;
				margin-right: 5% !important;
				margin-top: 2%;
			}

			.wizard-card {
				height: 95%;
			}

			.spacer {
				height: 0px;
			}
		}
	</style>
</head>

<body>
	<div class="image-container set-full-height" id="bg-pic">

		<!--   Big container   -->
		<div class="container">
			<div class="row">
				<div class="col-sm-8 col-sm-offset-2">
					<!--      Wizard container        -->
					<div class="wizard-container">
						<div class="card wizard-card" data-color="red" id="wizard">
							<form action="" method="">
								<!--        You can switch " data-color="blue" "  with one of the next bright colors: "green", "orange", "red", "purple"             -->

								<div class="wizard-header">
									<center>

										<div class="wizard-title">
											<img src="./logo/logo.png" width="200px">
										</div>
									</center>

									<h3 class="wizard-title main-text">
										Travelling and don't speak the local language?
									</h3>
									<h5 class="main-text">Search for an image below and use it to find your way around!
									</h5>
									<br>
									<small>Looking for the offline version? Click <a
											href="offline.html">here.</a></small>
									<center>
										<input id="query" onkeydown="predictSearch()" onchange="predictSearch()"
											oninput="predictSearch()" type="text"
											placeholder="Start typing to receive suggestions" class="form-control">

									</center>
									<br>

									<div id="predictions"></div>
									<br>

									</center>
								</div>

								<center>
									<img src="" class="resultImage" id="queryResult">
								</center>
								<center>
									<div id="errorMessage"></div>
								</center>
								<center>

									<div class="spacer"></div>
								</center>

						</div>


					</div>

					</form>
				</div>
			</div> <!-- wizard container -->
			<br>
			<br>
		</div>
	</div> <!-- row -->
	</div> <!--  big container -->

	</div>

	<script>


		var lastImage = document.getElementById('throwaway');

		function runSearch(providedQuery) {
			var query;
			if (providedQuery != undefined) {
				query = providedQuery
			}
			else {
				query = document.getElementById('query').value;
			}
			var image = query.toLowerCase().split(' ').join('-');
			if (image == undefined) {
				document.getElementById('errorMessage').innerHTML = "<h5>Could not find a matching image, sorry!</h5>";
				previousImage.setAttribute('class', 'hiddenPics');
			}
			else {
				document.getElementById('errorMessage').innerHTML = "";
				var queryResult = document.getElementById('queryResult');
				// queryResult.setAttribute('src', document.getElementById(image).src);
				queryResult.setAttribute('height', 250);
				queryResult.setAttribute('src', String("./images/" + imagesMap[image]));
				// addToRecentSearches(providedQuery) --> To be used in production
			}
		}

		function predictSearch() {
			var currentSearch = document.getElementById('query').value.toLowerCase();
			document.getElementById('predictions').innerHTML = '';
			document.getElementById('errorMessage').innerHTML = "";
			if (currentSearch != '') {
				var sameFirstLetterWords = imageList[currentSearch[0]];
				var len = sameFirstLetterWords.length;
				var matchesArr = [];
				for (var i = 0; i < len; i++) {
					if (matchesArr.length == 4) {
						break;
					}
					for (var j = 0; j < currentSearch.length; j++) {
						if (currentSearch[j] != sameFirstLetterWords[i][j]) {
							break;
						}
						else if (j == currentSearch.length - 1) {
							matchesArr.push(sameFirstLetterWords[i]);
						}
					}
				}
				matchesArr.forEach(function (word) {
					document.getElementById('predictions').innerHTML += '<p><button class="text-link" onmouseover="runSearch(this.innerHTML)">' + word + '</button></p>';
				})
			}
		}


		// Local storage does not work with static local websites
		// To be used in production
		/*
		function addToRecentSearches(query) {
			var recentSearches = window.localStorage;
			if (recentSearches == undefined) {
				window.localStorage.setItem('recentSearches', [query]);
			}
			else if (recentSearches.indexOf(query) < 0) {
				recentSearches.append(query);
				recentSearches.pop();
			}
			else {
				recentSearches.splice(1, recentSearches.indexOf(query));
				recentSearches.append(query);
			}
		}
		*/




		var imageList = {
			"a": [
				"adaptor",
				"air conditioning",
				"airplane",
				"airport",
				"alcohol",
				"allergy",
				"apple",
				"arm"
			],
			"b": [
				"backpack",
				"bag",
				"bakery",
				"banana",
				"bar",
				"barbeque",
				"barber",
				"beach",
				"bed",
				"bedroom",
				"beer",
				"bench",
				"bin",
				"bird",
				"bluetooth",
				"boat",
				"book",
				"bookstore",
				"bottle",
				"bowl",
				"boy",
				"bread",
				"bridge",
				"burger",
				"bus",
				"bus stop"
			],
			"c": [
				"cable car",
				"calculator",
				"camera",
				"camp",
				"cap",
				"car",
				"card",
				"cards",
				"cash",
				"cat",
				"chair",
				"charger",
				"child",
				"cinema",
				"clock",
				"clothes",
				"club",
				"cocktail",
				"coffee",
				"coffee shop",
				"computer",
				"condoms",
				"convenience store",
				"cow",
				"crackers",
				"credit card",
				"cup",
				"cutlery"
			],
			"d": [
				"day",
				"debit card",
				"dog",
				"driverâ€™s license",
				"duck"
			],
			"e": [
				"egg",
				"exchange"
			],
			"f": [
				"ferry",
				"first aid kit",
				"fish",
				"fog",
				"food",
				"foot",
				"fork",
				"fridge",
				"fruits"
			],
			"g": [
				"gas station",
				"girl",
				"glass",
				"glasses",
				"glue",
				"gym"
			],
			"h": [
				"hair",
				"hair-tie",
				"hairbrush",
				"hand",
				"hand sanitizer",
				"hike",
				"horse",
				"hospital",
				"hostel",
				"hotel"
			],
			"i": [
				"internet",
				"intersection",
				"iron"
			],
			"j": [
				"jacket",
				"juice"
			],
			"k": [
				"key",
				"kitchen",
				"knife"
			],
			"l": [
				"lamb",
				"laptop",
				"laundry",
				"library",
				"lion"
			],
			"m": [
				"mall",
				"man",
				"mango",
				"map",
				"marker",
				"market",
				"master card",
				"meat",
				"medicine",
				"men",
				"metro",
				"microwave",
				"milk",
				"minifridge",
				"money",
				"moon",
				"motorcycle",
				"mountain",
				"movie",
				"mug",
				"museum"
			],
			"n": [
				"night",
				"noodles",
				"notebook",
				"numbers",
				"nuts"
			],
			"o": [
				"ocean",
				"oven"
			],
			"p": [
				"pan",
				"panda",
				"papaya",
				"paper",
				"passport",
				"pasta",
				"path",
				"peanuts",
				"pen",
				"pencil",
				"pharmacy",
				"phone",
				"picture",
				"pig",
				"pizza",
				"plane",
				"plastic bag",
				"plate",
				"police",
				"pork",
				"pot",
				"power",
				"power bank",
				"pregnancy test",
				"purse"
			],
			"q": [],
			"r": [
				"rain",
				"razor",
				"restaurant",
				"rice",
				"road"
			],
			"s": [
				"salad",
				"salmon",
				"school",
				"scissors",
				"sea",
				"shampoo",
				"shop",
				"shopping",
				"shopping center",
				"shopping mall",
				"sit",
				"slippers",
				"snacks",
				"soap",
				"socket",
				"socks",
				"spaghetti",
				"spoon",
				"square",
				"stall",
				"store",
				"stove",
				"strawberry",
				"street",
				"student",
				"subway",
				"suitcase",
				"sun",
				"sunglasses",
				"sunny",
				"sunscreen"
			],
			"t": [
				"table",
				"taxi",
				"tea",
				"telephone",
				"television",
				"tv",
				"tent",
				"ticket office",
				"tiger",
				"time",
				"toilet",
				"toilet paper",
				"toiletries",
				"toilets",
				"toothbrush",
				"tourist",
				"tourist attraction",
				"tourist center",
				"towel",
				"tower",
				"trail",
				"train",
				"train station",
				"trash",
				"trash can",
				"tube"
			],
			"u": [
				"umbrella",
				"university"
			],
			"v": [
				"vegan",
				"vegetables",
				"vegetarian",
				"visa",
				"vodka"
			],
			"w": [
				"wall",
				"watch",
				"water",
				"wifi",
				"window",
				"wine",
				"wing",
				"wipes",
				"woman",
				"women"
			],
			"x": [],
			"y": [],
			"z": []
		}

		var imagesMap = {
			"adaptor": "adaptor.jpg",
			"air-conditioning": "air-conditioning.jpeg",
			"airplane": "airplane.jpeg",
			"airport": "airport.jpg",
			"alcohol": "alcohol.jpg",
			"allergy": "allergy.jpg",
			"apple": "apple.jpg",
			"arm": "arm.jpg",
			"backpack": "backpack.jpg",
			"bakery": "bakery.jpg",
			"banana": "banana.jpg",
			"bar": "bar.jpg",
			"barbeque": "barbeque.jpg",
			"barber": "barber.jpg",
			"beach": "beach.jpg",
			"bed": "bed.jpg",
			"beer": "beer.jpg",
			"bench": "bench.jpg",
			"bin": "bin.jpg",
			"bird": "bird.jpg",
			"bluetooth": "bluetooth.png",
			"boat": "boat.jpg",
			"book": "book.jpg",
			"bookstore": "bookstore.jpg",
			"bottle": "bottle.jpg",
			"bowl": "bowl.jpg",
			"boy": "boy.jpg",
			"bread": "bread.jpg",
			"bridge": "bridge.png",
			"burger-king": "burger-king.png",
			"burger": "burger.jpg",
			"bus-stop": "bus-stop.jpeg",
			"bus": "bus.jpeg",
			"cable-car": "cable-car.jpg",
			"calculator": "calculator.jpg",
			"camera": "camera.jpg",
			"camp": "camp.jpg",
			"cap": "cap.png",
			"car": "car.png",
			"card": "card.png",
			"cards": "cards.jpg",
			"cash": "cash.png",
			"cat": "cat.jpg",
			"chair": "chair.png",
			"charger": "charger.png",
			"child": "child.png",
			"chopsticks": "chopsticks.jpg",
			"cinema": "cinema.jpg",
			"clock": "clock.png",
			"clothes": "clothes.png",
			"club": "club.jpg",
			"cocktail": "cocktail.png",
			"coffee-shop": "coffee-shop.png",
			"coffee": "coffee.jpg",
			"computer": "computer.png",
			"condoms": "condoms.png",
			"convenience-store": "convenience-store.jpg",
			"cow": "cow.jpg",
			"crackers": "crackers.jpg",
			"cup": "cup.jpg",
			"cutlery": "cutlery.png",
			"day": "day.png",
			"dog": "dog.jpg",
			"driver's-license": "driver's-license.png",
			"duck": "duck.png",
			"egg": "egg.jpg",
			"exchange": "exchange.png",
			"ferry": "ferry.jpg",
			"first-aid-kit": "first-aid-kit.jpg",
			"fish": "fish.jpg",
			"fog": "fog.jpg",
			"food": "food.jpg",
			"foot": "foot.png",
			"fork": "fork.jpg",
			"fridge": "fridge.png",
			"fruits": "fruits.jpg",
			"gas-station": "gas-station.png",
			"girl": "girl.png",
			"glass": "glass.png",
			"glasses": "glasses.png",
			"glue": "glue.png",
			"gym": "gym.png",
			"hair-tie": "hair-tie.jpg",
			"hair": "hair.png",
			"hairbrush": "hairbrush.png",
			"hand-sanitizer": "hand-sanitizer.png",
			"hand": "hand.png",
			"hike": "hike.png",
			"horse": "horse.png",
			"hospital": "hospital.png",
			"hostel": "hostel.png",
			"hotel": "hotel.png",
			"internet": "internet.png",
			"intersection": "intersection.png",
			"iron": "iron.png",
			"jacket": "jacket.png",
			"juice": "juice.png",
			"key": "key.png",
			"kitchen-utensils": "kitchen-utensils.png",
			"kitchen": "kitchen.png",
			"knife": "knife.jpg",
			"lamb": "lamb.png",
			"laptop": "laptop.jpg",
			"laundry": "laundry.png",
			"library": "library.jpg",
			"lion": "lion.png",
			"mall": "mall.jpg",
			"man": "man.jpg",
			"mango": "mango.jpg",
			"map": "map.jpg",
			"marker": "marker.png",
			"market": "market.png",
			"master-card": "master-card.jpeg",
			"mc-donald's": "mc-donald's.png",
			"meat": "meat.png",
			"medicine": "medicine.jpg",
			"men": "men.png",
			"metro": "metro.jpg",
			"microwave": "microwave.png",
			"milk": "milk.png",
			"minifridge": "minifridge.png",
			"money": "money.jpg",
			"moon": "moon.png",
			"motorcycle": "motorcycle.png",
			"mountain": "mountain.png",
			"movie": "movie.jpg",
			"mug": "mug.png",
			"museum": "museum.jpg",
			"night": "night.jpg",
			"noodles": "noodles.png",
			"notebook": "notebook.jpg",
			"numbers": "numbers.png",
			"nuts": "nuts.jpg",
			"ocean": "ocean.jpg",
			"oven": "oven.png",
			"pan": "pan.png",
			"panda": "panda.png",
			"papaya": "papaya.png",
			"paper": "paper.png",
			"passport": "passport.jpg",
			"pasta": "pasta.jpg",
			"path": "path.png",
			"peanuts": "peanuts.jpg",
			"pen": "pen.jpg",
			"pencil": "pencil.png",
			"pharmacy": "pharmacy.png",
			"phone": "phone.jpg",
			"picture": "picture.jpg",
			"pig": "pig.jpg",
			"pizza": "pizza.jpg",
			"plane": "plane.png",
			"plastic-bag": "plastic-bag.jpg",
			"plate": "plate.png",
			"police": "police.jpg",
			"pot": "pot.png",
			"power-bank": "power-bank.jpg",
			"power": "power.jpg",
			"pregnancy-test": "pregnancy-test.jpg",
			"purse": "purse.png",
			"rain": "rain.jpg",
			"razor": "razor.png",
			"restaurant": "restaurant.png",
			"rice": "rice.png",
			"road": "road.png",
			"salad": "salad.jpg",
			"salmon": "salmon.png",
			"school": "school.png",
			"scissors": "scissors.png",
			"sea": "sea.jpg",
			"shampoo": "shampoo.png",
			"ship": "ship.jpg",
			"shop": "shop.png",
			"shopping-mall": "shopping-mall.png",
			"shopping": "shopping.jpg",
			"sit": "sit.jpg",
			"slippers": "slippers.png",
			"snacks": "snacks.png",
			"soap": "soap.jpg",
			"socket": "socket.png",
			"socks": "socks.png",
			"spaghetti": "spaghetti.jpg",
			"spoon": "spoon.png",
			"square": "square.png",
			"stall": "stall.png",
			"starbucks": "starbucks.jpg",
			"store": "store.png",
			"strawberry": "strawberry.png",
			"student": "student.jpg",
			"subway": "subway.png",
			"suitcase": "suitcase.jpg",
			"sun": "sun.jpg",
			"sunglasses": "sunglasses.png",
			"sunny": "sunny.png",
			"sunscreen": "sunscreen.jpg",
			"table": "table.jpg",
			"taxi": "taxi.jpg",
			"tea": "tea.jpg",
			"telephone": "telephone.png",
			"television": "television.png",
			"tent": "tent.jpg",
			"ticket-office": "ticket-office.png",
			"tiger": "tiger.png",
			"time": "time.jpg",
			"toilet-paper": "toilet-paper.jpg",
			"toilet": "toilet.jpg",
			"toiletries": "toiletries.jpg",
			"toilets": "toilets.png",
			"toothbrush": "toothbrush.jpg",
			"tourist-attraction": "tourist-attraction.png",
			"tourist-center": "tourist-center.png",
			"tourist": "tourist.png",
			"towel": "towel.jpg",
			"tower": "tower.png",
			"trail": "trail.png",
			"train-station": "train-station.png",
			"train": "train.jpg",
			"trash": "trash.png",
			"tube": "tube.png",
			"tv": "tv.png",
			"umbrella": "umbrella.png",
			"university": "university.png",
			"vegan": "vegan.jpg",
			"vegetables": "vegetables.png",
			"vegetarian": "vegetarian.jpg",
			"visa": "visa.png",
			"vodka": "vodka.jpg",
			"wall": "wall.jpg",
			"watch": "watch.jpg",
			"water": "water.jpg",
			"wifi": "wifi.png",
			"window": "window.jpg",
			"wine": "wine.jpg",
			"wing": "wing.jpg",
			"wipes": "wipes.png",
			"woman": "woman.jpg",
			"women": "women.png",
			"ac": "air-conditioning.jpeg",
			"bedroom": "bed.jpg",
			"pork": "pig.jpg",
			"street": "road.png",
			"trash-can": "trash.png",
			"stove": "oven.png",
			"shopping-center": "shopping-mall.png",
			"credit-card": "card.png",
			"debit-card": "card.png"
		}


		$('p').append(Math.random());

		$(window).bind({
			beforeunload: function (ev) {
				ev.preventDefault();
			},
			unload: function (ev) {
				ev.preventDefault();
			}
		});

	</script>

</body>
<!--   Core JS Files   -->
<script src="./assets/material-bootstrap/assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>
<script src="./assets/material-bootstrap/assets/js/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/material-bootstrap/assets/js/jquery.bootstrap.js" type="text/javascript"></script>

<!--  Plugin for the Wizard -->
<script src="./assets/material-bootstrap/assets/js/material-bootstrap-wizard.js"></script>

<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
<script src="./assets/material-bootstrap/assets/js/jquery.validate.min.js"></script>

</html>